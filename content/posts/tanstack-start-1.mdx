---
title: "TanStack Start í”„ë ˆì„ì›Œí¬ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤ [1]"
date: "2025-05-13"
description: "TanStackì˜ ìƒˆë¡œìš´ í”„ë ˆì„ ì›Œí¬ TanStack Start ë² íƒ€ë²„ì „ ì¨ë³´ê¸°"
metaDescription: "TanStack Router ê¸°ë°˜ í’€ìŠ¤íƒ React í”„ë ˆì„ì›Œí¬ TanStack Start ë² íƒ€ ë²„ì „ ì†Œê°œì™€ í”„ë¡œì íŠ¸ ì„¸íŒ…, íƒ€ì… ì•ˆì „ ë¼ìš°íŒ… ì‚¬ìš©ë²•ì„ ì •ë¦¬í•©ë‹ˆë‹¤."
author: "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ê¶Œìˆœìš©"
parentCategory: "Frontend"
tags: ["React", "TanStack", "TanStack Start", "TanStack Router", "SSR"]
thumbnail: "/images/thumbnails/tanstack1.webp"
---

> TanStack Query (êµ¬ React Query)ë¡œ ìœ ëª…í•œ TanStackì—ì„œ ê°œë°œ ì¤‘ì¸ í”„ë ˆì„ì›Œí¬ë¡œ íƒ€ì… ì•ˆì „í•œ ë¼ìš°íŒ…ì„ ì œê³µí•˜ëŠ” **TanStack Router** ìœ„ì— êµ¬ì¶•ëœ í’€ìŠ¤íƒ React í”„ë ˆì„ì›Œí¬ë¼ê³  í•©ë‹ˆë‹¤.
> ì•„ì§ì€ ë² íƒ€ ë²„ì „ì´ê¸°ì— ì‹¤ì œ ê°œë°œ í™˜ê²½ì— ì‚¬ìš©í•˜ê¸°ëŠ” ë¬´ë¦¬ê°€ ìˆê² ì§€ë§Œ Next.jsì™€ ì—¬ëŸ¬ëª¨ë¡œ ë¹„ìŠ·í•œ ë¶€ë¶„ì´ ë§ì€ê±° ê°™ìŠµë‹ˆë‹¤.
> í•˜ì§€ë§Œ ì¡°ê¸ˆ ë” 'React'ìŠ¤ëŸ¬ìš´ í”„ë ˆì„ì›Œí¬ë¥¼ ì§€í–¥í•˜ëŠ”ê±° ê°™ì•„ í˜¸ê¸°ì‹¬ì— ì§ì ‘ ì‚¬ìš©í•´ ë³´ë©° êµ¬ì¡°ì™€ ê¸°ëŠ¥ì„ íƒìƒ‰ í•´ë´¤ìŠµë‹ˆë‹¤.

> _ì¶”ê°€ë¡œ `Neon`ê³¼ `drizzleORM`ì„ ì‚¬ìš©í•´ ì„œë²„ì‚¬ì´ë“œì—ì„œ ë°ì´í„° ì ‘ê·¼, ì „ì†¡ë„ êµ¬í˜„ í•´ë³´ë ¤í•©ë‹ˆë‹¤._

[TanStack Start ê³µì‹ë¬¸ì„œ ë°”ë¡œê°€ê¸°](https://tanstack.com/start/latest)

ê³µì‹ë¬¸ì„œê°€ ìë‘í•˜ëŠ” ì£¼ìš” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

- SSR (ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§)
- ìŠ¤íŠ¸ë¦¬ë° ë Œë”ë§
- ì„œë²„ í•¨ìˆ˜ / RPCs (Next.jsì˜ ì„œë²„ ì•¡ì…˜, API routesì™€ ìœ ì‚¬)
- í’€ìŠ¤íƒ íƒ€ì… ì•ˆì •ì„± ë³´ì¥

## 1. í”„ë¡œì íŠ¸ ì„¸íŒ…ğŸš€

ì•„ì§ì€ ì•„ì‰½ê²Œë„ ì†ì‰½ê²Œ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì¶• ê°€ëŠ¥í•œ CRAë‚˜ Create Next App ê°™ì€ CLI ëª…ë ¹ì–´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê³µì‹ë¬¸ì„œë¥¼ ë”°ë¼ê°€ë³´ë©° ì§„í–‰ í•´ë³´ê² ìŠµë‹ˆë‹¤.

ìš°ì„  í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  í´ë”ë¥¼ ë§Œë“¤ê³  ì‹œì‘íŒŒì¼ì„ êµ¬ì„±í•´ì¤ë‹ˆë‹¤.

```
mkdir my-tanstack-start-app
cd my-tanstack-start-app
npm init -y
```

## 1-1. tsconfig íŒŒì¼ ì‘ì„±

í”„ë¡œì íŠ¸ì—ì„œ ë£¨íŠ¸ ê²½ë¡œì— tsconfig.json íŒŒì¼ì„ ì‘ì„±í•´ì¤ë‹ˆë‹¤. ê³µì‹ë¬¸ì„œ ì˜ˆì‹œë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.
ê³„ì†í•´ì„œ ìë‘í•˜ëŠ”ê²ƒì´ íƒ€ì… ì•ˆì •ì„±ì´ê¸°ì— ê³µì‹ë¬¸ì„œì—ë„ TypeScript ì‚¬ìš©ì„ ê°•ë ¥í•˜ê²Œ ì¶”ì²œí•œë‹¤ê³  í•©ë‹ˆë‹¤.

```json
{
  "compilerOptions": {
    "jsx": "react-jsx",
    "moduleResolution": "Bundler",
    "module": "ESNext",
    "target": "ES2022",
    "skipLibCheck": true,
    "strictNullChecks": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"]
    }
  }
}
```

ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©ì„ ìœ„í•´ ì¶”ê°€ ì˜µì…˜ë„ ë„£ì–´ì¤¬ìŠµë‹ˆë‹¤.

## 1-2. ì˜ì¡´ì„± ì„¤ì¹˜

> _TanStack StartëŠ” í˜„ì¬ Vinxiì™€ TanStack Router ìœ„ì—ì„œ ë™ì‘í•˜ê³  ìˆìœ¼ë©°, ì„¤ì¹˜ ì‹œ í•¨ê»˜ í•„ìš”í•©ë‹ˆë‹¤.
> í•˜ì§€ë§Œ 1.0.0 ì •ì‹ ë²„ì „ì´ ì¶œì‹œë˜ë©´ VinxiëŠ” ì œê±°ë˜ê³ , ëŒ€ì‹  Vite + Nitro ì¡°í•©ë§Œìœ¼ë¡œ ì‘ë™í•˜ê²Œ ë©ë‹ˆë‹¤. ì¦‰, VinxiëŠ” ì¼ì‹œì ì¸ ë„êµ¬ì´ë©° ê³§ ëŒ€ì²´ë  ì˜ˆì •ì…ë‹ˆë‹¤. _
> (ê³µì‹ë¬¸ì„œì˜ ê¸€ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤)

**âš™ï¸ Vinxiê°€ ë­”ë°? (+ChatGPT)**

- Vinxi: SSR, streaming ë“±ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” Vite ê¸°ë°˜ í’€ìŠ¤íƒ ì„œë²„ ëŸ°íƒ€ì„
- í˜„ì¬ TanStack Startì—ì„œ SSRê³¼ ì„œë²„ í•¨ìˆ˜ ì‹¤í–‰ì„ ë‹´ë‹¹

---

```bash
npm i @tanstack/react-start @tanstack/react-router vinxi
```

ë¨¼ì € TanStack Start, TanStack Router, Vinxië¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm i react react-dom
npm i -D @vitejs/plugin-react vite-tsconfig-paths
```

ê·¸ ë‹¤ìŒ Reactì™€ ReactDOMì„ ì„¤ì¹˜í•˜ê³ , Vite ë¦¬ì•¡íŠ¸ í”ŒëŸ¬ê·¸ì¸ë“¤ë„ ì„¤ì¹˜ í•´ì¤ë‹ˆë‹¤.

```bash
npm i -D typescript @types/react @types/react-dom
```

ë§ˆì§€ë§‰ìœ¼ë¡œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.

## 1-3. ì„¤ì • íŒŒì¼ ìˆ˜ì •

**1. package.json ìˆ˜ì •**

```json
{
  // ...
  "type": "module",
  "scripts": {
    "dev": "vinxi dev",
    "build": "vinxi build",
    "start": "vinxi start"
  }
}
```

ES ëª¨ë“ˆ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `"type": "module"`ë¡œ ë°”ê¿”ì£¼ê³ , script ë¶€ë¶„ë„ `vinxi` ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°œë°œ í™˜ê²½ì„ ì‹¤í–‰í•˜ë„ë¡ ë°”ê¿”ì¤ë‹ˆë‹¤.

**2. app.config.ts íŒŒì¼ ì‘ì„±**

```ts
// app.config.ts
import { defineConfig } from "@tanstack/react-start/config";
import tsConfigPaths from "vite-tsconfig-paths";

export default defineConfig({
  vite: {
    plugins: [
      tsConfigPaths({
        projects: ["./tsconfig.json"],
      }),
    ],
  },
});
```

## 1-4. ê¸°ë³¸ í…œí”Œë¦¿ ì¶”ê°€

TanStack Startë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìˆ˜ë¡œ í•„ìš”í•œ ë„¤ê°€ì§€ íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤.

> 1. ë¼ìš°í„° ì„¤ì • íŒŒì¼
> 2. ì„œë²„ ì§„ì…ì 
> 3. í´ë¼ì´ì–¸íŠ¸ ì§„ì…ì 
> 4. ì•±ì˜ ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸

ìµœì¢… êµ¬ì„±ì´ ì™„ë£Œë˜ë©´ ì•„ë˜ì™€ ê°™ì€ í´ë”êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤ê³  í•©ë‹ˆë‹¤.

```
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ `__root.tsx`
â”‚   â”œâ”€â”€ `client.tsx`
â”‚   â”œâ”€â”€ `router.tsx`
â”‚   â”œâ”€â”€ `routeTree.gen.ts`
â”‚   â””â”€â”€ `ssr.tsx`
â”œâ”€â”€ `.gitignore`
â”œâ”€â”€ `app.config.ts`
â”œâ”€â”€ `package.json`
â””â”€â”€ `tsconfig.json`
```

**1. ë¼ìš°í„° êµ¬ì„± íŒŒì¼ ì‘ì„± (router.tsx)**
TanStack Routerì˜ ë™ì‘ì„ ì •ì˜í•˜ë©° ì—¬ê¸°ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¦¬ë¡œë”© ê¸°ëŠ¥ë¶€í„° ìºì‹±ì˜ stale ìƒíƒœê¹Œì§€ ëª¨ë“  ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.

```tsx
// app/router.tsx
import { createRouter as createTanStackRouter } from "@tanstack/react-router";
import { routeTree } from "./routeTree.gen";

export function createRouter() {
  const router = createTanStackRouter({
    routeTree,
    scrollRestoration: true,
  });

  return router;
}

declare module "@tanstack/react-router" {
  interface Register {
    router: ReturnType<typeof createRouter>;
  }
}
```

ì—¬ê¸°ì„œ `Cannot find module './routeTree.gen' or its corresponding type declarations.` ë¼ëŠ” ì—ëŸ¬ê°€ ì¡íí…ë° í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ í•´ë‹¹ ì—ëŸ¬ê°€ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì— ë¬´ì‹œí•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.

**2. ì„œë²„ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ íŒŒì¼ ì‘ì„± (ssr.tsx)**
TanStack StartëŠ” ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ í”„ë ˆì„ì›Œí¬ì´ë¯€ë¡œ ì´ ë¼ìš°í„° ì •ë³´ë¥¼ ì„œë²„ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ë¡œ ì „ë‹¬í•´ì•¼ í•œë‹¤ê³  í•©ë‹ˆë‹¤.

```tsx
// app/ssr.tsx
import {
  createStartHandler,
  defaultStreamHandler,
} from "@tanstack/react-start/server";
import { getRouterManifest } from "@tanstack/react-start/router-manifest";

import { createRouter } from "./router";

export default createStartHandler({
  createRouter,
  getRouterManifest,
})(defaultStreamHandler);
```

ì´ ì½”ë“œëŠ” ì‚¬ìš©ìê°€ íŠ¹ì • ê²½ë¡œë¥¼ ìš”ì²­í•  ë•Œ í•´ë‹¹ ê²½ë¡œì— ëŒ€í•´ ì–´ë–¤ ë¼ìš°íŠ¸ì™€ ë¡œë”ë¥¼ ì‹¤í–‰í•´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤.

**3. í´ë¼ì´ì–¸íŠ¸ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ íŒŒì¼ ì‘ì„± (client.tsx)**

ì„œë²„ì—ì„œ ë¼ìš°íŠ¸ë¥¼ ì²˜ë¦¬í•œë’¤ í´ë¼ì´ì–¸íŠ¸ì—ì„œ JavaScriptë¥¼ Hydrationí•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ë™ì¼í•œ ë¼ìš°í„° ì •ë³´ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì§„ì…ì ì— ì „ë‹¬í•˜ëŠ” ì½”ë“œë¼ê³  í•©ë‹ˆë‹¤.

```tsx
// app/client.tsx
/// <reference types="vinxi/types/client" />
import { hydrateRoot } from "react-dom/client";
import { StartClient } from "@tanstack/react-start";
import { createRouter } from "./router";

const router = createRouter();

hydrateRoot(document, <StartClient router={router} />);
```

**4. ì•± ë£¨íŠ¸ íŒŒì¼ ì‘ì„±**
` app í´ë” -> routes í´ë” ìƒì„± -> __root.tsx`

ë§ˆì§€ë§‰ìœ¼ë¡œ ì•±ì˜ ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì´ ë£¨íŠ¸ íŒŒì¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¼ìš°íŠ¸ì˜ ì§„ì… ì§€ì ì´ë©° í•˜ìœ„ ë¼ìš°íŠ¸ë¥¼ ê°ì‹¸ëŠ” êµ¬ì¡°ë¼ê³  í•©ë‹ˆë‹¤. Next.jsì˜ ë£¨íŠ¸ layout íŒŒì¼ê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ”ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```tsx
// app/routes/__root.tsx
import type { ReactNode } from "react";
import {
  Outlet,
  createRootRoute,
  HeadContent,
  Scripts,
} from "@tanstack/react-router";

export const Route = createRootRoute({
  head: () => ({
    meta: [
      {
        charSet: "utf-8",
      },
      {
        name: "viewport",
        content: "width=device-width, initial-scale=1",
      },
      {
        title: "TanStack Start Starter",
      },
    ],
  }),
  component: RootComponent,
});

function RootComponent() {
  return (
    <RootDocument>
      <Outlet />
    </RootDocument>
  );
}

function RootDocument({ children }: Readonly<{ children: ReactNode }>) {
  return (
    <html>
      <head>
        <HeadContent />
      </head>
      <body>
        {children}
        <Scripts />
      </body>
    </html>
  );
}
```

# 2. ë¼ìš°íŠ¸ ì„¸íŒ…

ì´ì œ í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ í˜ì´ì§€ë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ TanStack Routerê°€ ì œê³µí•˜ëŠ” ë¼ìš°íŒ… ë°©ì‹ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.

[TanStack Router ê³µì‹ë¬¸ì„œ ë°”ë¡œê°€ê¸°](https://tanstack.com/router/latest)

TanStack RouterëŠ” **í´ë” ê¸°ë°˜ ë¼ìš°íŒ…**, **ì½”ë“œ ê¸°ë°˜ ë¼ìš°íŒ…** ë‘ê°€ì§€ ë¼ìš°íŒ… êµ¬ì¡°ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

ì €ëŠ” Next.jsì˜ app router ë°©ì‹ê³¼ ë¹„ìŠ·í•´ì„œ ë” ì¹œìˆ™í–ˆê¸°ì— í´ë” ê¸°ë°˜ ë¼ìš°íŒ…ìœ¼ë¡œ ë¼ìš°íŠ¸ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.
**`app/routes` í´ë” ì•„ë˜ íŒŒì¼/í´ë” êµ¬ì¡°ì— ë”°ë¼ ë¼ìš°íŠ¸ê°€ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤ê³  í•©ë‹ˆë‹¤.**

`app í´ë”-> routes í´ë” -> index.tsx` ë¹ˆ íŒŒì¼ì„ ìƒì„±ë§Œ í•´ì¤ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/e59fe7b2-bff4-40fc-8068-0d0152885ca5/image.png)

ê·¸ë¦¬ê³  `npm run dev`ë¡œ ê°œë°œ ì„œë²„ë¥¼ ê°€ë™í•´ë´¤ìŠµë‹ˆë‹¤.

```tsx
//@app/routes/index.tsx
import { createFileRoute } from "@tanstack/react-router";

export const Route = createFileRoute("/")({
  component: RouteComponent,
});

function RouteComponent() {
  return <div>Hello "/"!</div>;
}
```

ì™€!! ìë™ìœ¼ë¡œ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.
ë˜í•œ `routeTree.gen.ts` ë¼ëŠ” íŒŒì¼ì´ ìƒì„±ë˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤.

> routeTree.gen.ts íŒŒì¼ì€ TanStack Routerì—ì„œ ì‚¬ìš©í•˜ëŠ” **ë¼ìš°íŠ¸ íŠ¸ë¦¬**ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” **ìë™ ìƒì„± íŒŒì¼(auto-generated file)**ì´ë¼ê³  í•©ë‹ˆë‹¤.
> í•´ë‹¹ íŒŒì¼ì€ TanStack Startë¥¼ ì‹¤í–‰í• ë•Œ ìë™ìœ¼ë¡œ ìƒì„±ë˜ë©° ìˆ˜ë™ìœ¼ë¡œ íŒŒì¼ì„ ìˆ˜ì •í•˜ëŠ”ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•©ë‹ˆë‹¤.

```tsx
import { createFileRoute } from "@tanstack/react-router";

export const Route = createFileRoute("/")({
  component: RouteComponent,
});

function RouteComponent() {
  return (
    <div>
      <h1>Hello TanStack Start!</h1>
    </div>
  );
}
```

ì½”ë“œë¥¼ ì¼ë¶€ ìˆ˜ì •í•œí›„ `localhost:3000` ì— ì ‘ì†í•´ë´¤ìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/04d35268-3243-4b16-b706-4ac8d0d6588f/image.png)
ì €ì˜ ì²« TanStack Start í”„ë¡œì íŠ¸ê°€ ì˜ ì‘ë™í•˜ëŠ” ëª¨ìŠµì…ë‹ˆë‹¤!

## TailWind CSS ì„¸íŒ…

ì¶”ê°€ì ìœ¼ë¡œ ìŠ¤íƒ€ì¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ TailWind CSSë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì–´ ë¹ ë¥´ê²Œ ì„¸íŒ…í•´ë³´ê² ìŠµë‹ˆë‹¤.

```bash
npm install tailwindcss @tailwindcss/postcss postcss
```

ê·¸ ë‹¤ìŒ í˜ì´ì§€ ë£¨íŠ¸ ê²½ë¡œì— `postcss.config.mjs` íŒŒì¼ì„ ì‘ì„±í•´ì¤ë‹ˆë‹¤.

```tsx
export default {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};
```

ë‹¤ìŒìœ¼ë¡œ í”„ë¡œì íŠ¸ì˜ app í´ë”ì•ˆì— `app.css` íŒŒì¼ì„ ì‘ì„±í•´ì¤ë‹ˆë‹¤.

```tsx
// @/app/app.css
@import "tailwindcss";

```

ë§ˆì§€ë§‰ìœ¼ë¡œ í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ íŒŒì¼ì— í•´ë‹¹ ì½”ë“œë¥¼ ì‘ì„±í•´ì¤ë‹ˆë‹¤

```tsx
import appCss from "@/app/app.css?url";
```

CSS íŒŒì¼ì„ ë¨¼ì € URL ë¬¸ìì—´ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.

```tsx
// app/routes/__root.tsx
import type { ReactNode } from "react";
import {
  Outlet,
  createRootRoute,
  HeadContent,
  Scripts,
} from "@tanstack/react-router";

import appCss from "@/app/app.css?url";

export const Route = createRootRoute({
  head: () => ({
    meta: [
      {
        charSet: "utf-8",
      },
      {
        name: "viewport",
        content: "width=device-width, initial-scale=1",
      },
      {
        title: "TanStack Start Starter",
      },
    ],
    links: [
      {
        rel: "stylesheet",
        href: appCss,
      },
    ],
  }),
  component: RootComponent,
});
// ....
```

ê°€ì ¸ì˜¨ ìŠ¤íƒ€ì¼ì‹œíŠ¸ë¥¼ head() í•¨ìˆ˜ ì•ˆì˜ links ë°°ì—´ì— ì¶”ê°€í•´ `<head>` íƒœê·¸ë¥¼ êµ¬ì„±í•´ì¤ë‹ˆë‹¤.

## ì¶”ê°€ í˜ì´ì§€ êµ¬ì„±

ë¼ìš°íŠ¸ êµ¬ì„± ë°©ì‹ì€ TanStack Router ë°©ì‹ì„ ë”°ë¦…ë‹ˆë‹¤.

ìŠ¤íƒ€ì¼ ì ìš©ì´ ì˜ë˜ë‚˜ í™•ì¸í•´ë³´ê¸°ìœ„í•´ ì¶”ê°€ë¡œ í˜ì´ì§€ë¥¼ êµ¬ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤.
`posts` í˜ì´ì§€ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ í˜ì´ì§€ì—ì„œë§Œ ë‚˜ì˜¤ëŠ” ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“œë ¤ê³  í•©ë‹ˆë‹¤.

ë¨¼ì € ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ `routes` í´ë” ì•ˆì— ì¶”ê°€ë¡œ `posts` í´ë”ë¥¼ ë§Œë“¤ê³  í´ë”ì•ˆì— `_post-layout.tsx` íŒŒì¼ì„ ì‘ì„±í•´ì¤ë‹ˆë‹¤.
**\_ ë’¤ì— íŒŒì¼ì´ë¦„ì€ ììœ ë¡­ê²Œ ì§€ì •í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.**

```tsx
//@app/routes/posts/_post-layout.tsx
import { createFileRoute, Outlet } from "@tanstack/react-router";

export const Route = createFileRoute("/posts/_post-layout")({
  component: RouteComponent,
});

function RouteComponent() {
  return (
    <>
      <header className="w-full text-3xl text-blue-500 p-4 border-b-2 border-black">
        Posts í˜ì´ì§€ í—¤ë”ì…ë‹ˆë‹¤!
      </header>
      <Outlet />
    </>
  );
}
```

ì‹¤ì œë¡œ í˜ì´ì§€ ë Œë”ë§ì„ ë‹´ë‹¹í•  `Outlet` ì»´í¬ë„ŒíŠ¸ë„ í•„ìˆ˜ë¡œ ë„£ì–´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.

ê·¸ ë‹¤ìŒìœ¼ë¡œ ë™ì¼í•œ ê²½ë¡œì— `_post-layout.index.tsx` ì´ë¦„ì„ ê°€ì§€ëŠ” ì‹¤ì œ `posts` í˜ì´ì§€ì˜ ì¸ë±ìŠ¤ íŒŒì¼ì„ ì‘ì„±í•´ì¤ë‹ˆë‹¤.

```tsx
//@app/routes/posts/_post-layout.index.tsx
import { createFileRoute } from "@tanstack/react-router";

export const Route = createFileRoute("/posts/_post-layout/")({
  component: RouteComponent,
});

function RouteComponent() {
  return <div>Hello "/posts/_layout/"!</div>;
}
```

ë¬¼ë¡  í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/49a84f9b-189b-468f-805b-7724453d7ad0/image.png)

í”„ë¡œì íŠ¸ì˜ `localhost:3000/posts` ê²½ë¡œë¡œ ì ‘ì†í•´ë³´ë©´ í—¤ë” ë ˆì´ì•„ì›ƒì´ ì˜ ì„¤ì •ë˜ì–´ìˆìŠµë‹ˆë‹¤.

---

## Path Params ì‚¬ìš©

ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” Path Paramsë¥¼ ì‚¬ìš©í•˜ëŠ” `posts` í˜ì´ì§€ì˜ í•˜ìœ„ í˜ì´ì§€ë¥¼ êµ¬ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.

ìš°ì„  `posts` í´ë” ì•ˆì— `_post-layout` í´ë”ë¥¼ ë¨¼ì € ë§Œë“­ë‹ˆë‹¤.
ì§ì „ì— ë§Œë“  ë ˆì´ì•„ì›ƒ íŒŒì¼ê³¼ í´ë” ì´ë¦„ì´ ë§¤ì¹­ë˜ë©´ í•´ë‹¹ ì¤‘ì²©ëœ í˜ì´ì§€ì—ì„œë„ í•´ë‹¹ ë ˆì´ì•„ì›ƒì´ ë Œë”ë§ ë©ë‹ˆë‹¤.

ê·¸ ë‹¤ìŒìœ¼ë¡œ í•˜ìœ„ì— `$postId` í´ë”ë¥¼ ë§Œë“¤ê³  `index.tsx` íŒŒì¼ì„ ì‘ì„±í•´ ì¤ë‹ˆë‹¤.

ì¡°ê¸ˆì€ ë³µì¡í•˜ì§€ë§Œ Next.js ë¼ìš°íŒ… ë°©ì‹ê³¼ ë¹„ìŠ·í•´ ì ì‘í•˜ëŠ”ë° ì–´ë ¤ì›€ì€ ì—†ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/cb640327-0483-4a9e-8344-f6c075435f94/image.png)

```tsx
import { createFileRoute } from "@tanstack/react-router";

export const Route = createFileRoute("/posts/_post-layout/$postId/")({
  component: RouteComponent,
});

function RouteComponent() {
  return <div>Hello "/posts/$postId/"!</div>;
}
```

ë¬¼ë¡  í•´ë‹¹ í˜ì´ì§€ë¥¼ ë‹´ë‹¹í•˜ëŠ” ì½”ë“œê°€ ìë™ìœ¼ë¡œ ì‘ì„± ë˜ì—ˆê³  `localhost:3000/posts/123` ê²½ë¡œë¡œ ì ‘ì† í•´ë´¤ìŠµë‹ˆë‹¤.
![](https://velog.velcdn.com/images/boyfromthewell/post/af03e838-7c53-4146-a94e-55994b3258d1/image.png)

ë ˆì´ì•„ì›ƒê¹Œì§€ ì˜ ë Œë”ë§ ë˜ì—ˆìŠµë‹ˆë‹¤.
ë‹¤ìŒìœ¼ë¡œëŠ” í•´ë‹¹ í˜ì´ì§€ì˜ Path Paramì„ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.

TanStack Routerê°€ ì œê³µí•˜ëŠ” `useParams` í›…ì„ ì‚¬ìš©í•´ ê°€ì ¸ì˜¬ìˆ˜ ìˆì§€ë§Œ ë˜ ë‹¤ë¥¸ ê¸°ëŠ¥ì¸ `loader` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
`TanStack Router`ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ ë¼ìš°í„° ë ˆë²¨ì—ì„œ ë°ì´í„°ë¥¼ preloadingí•˜ëŠ” í•¨ìˆ˜ì´ë©° ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë Œë”ë§ë˜ê¸° ì „ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ë°±ì—”ë“œë‚˜ ì„œë²„ í•¨ìˆ˜ì—ì„œ ê°€ì ¸ì˜¤ê³  ê·¸ ê²°ê³¼ë¥¼ ë¼ìš°íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤ê³  í•©ë‹ˆë‹¤.

ìš°ì„  íŒŒì¼ ìƒë‹¨ì—ì„œ `loader` í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ ì¤ë‹ˆë‹¤.

```tsx
// @app/routes/posts/_post-layout/$postId/index.tsx
export const Route = createFileRoute("/posts/_post-layout/$postId/")({
  component: RouteComponent,
  loader: async ({ params }) => {
    return {
      postId: params.postId,
    };
  },
});

//...
```

ê°•ë ¥í•œ íƒ€ì… ì§€ì› ë¼ìš°íŒ… ë•ë¶„ì— ìë™ìœ¼ë¡œ íƒ€ì… ì¶”ë¡ ì´ ë˜ì–´ ê°„í¸í–ˆìŠµë‹ˆë‹¤.
![](https://velog.velcdn.com/images/boyfromthewell/post/e86e26bd-6aef-46d1-b498-acb92f8d1860/image.png)

```tsx
import { createFileRoute } from "@tanstack/react-router";

export const Route = createFileRoute("/posts/_post-layout/$postId/")({
  component: RouteComponent,
  loader: async ({ params }) => {
    return {
      postId: params.postId,
    };
  },
});

function RouteComponent() {
  const { postId } = Route.useLoaderData();
  return <div>posts/{postId} í˜ì´ì§€ì…ë‹ˆë‹¤!</div>;
}
```

ì´í›„ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œëŠ” TanStack Routerê°€ ì œê³µí•˜ëŠ” `useLoaderData` í›…ì„ ì‚¬ìš©í•´ loader í•¨ìˆ˜ì—ì„œ ë°˜í™˜í•œ postId ê°’ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/713cb613-26a6-440b-b080-f97f46a10b6e/image.png)
`localhost:3000/posts/123`ì— ì ‘ì†í•´ë³´ë©´ í•´ë‹¹í•˜ëŠ” Path Paramì„ ì˜ ê°€ì ¸ì˜¨ ëª¨ìŠµì…ë‹ˆë‹¤.

loader í•¨ìˆ˜ëŠ” ë‹¨ìˆœíˆ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ SSR í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ì´ˆê¸° í˜ì´ì§€ ë¡œë”© ì‹œì ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ë„ êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

# 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

ì„œë²„ ì‚¬ì´ë“œ ë°©ì‹ì´ê¸° ë•Œë¬¸ì— DBì— ì§ì ‘ ì ‘ê·¼í•´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜ ì „ì†¡í•˜ëŠ” ë™ì‘ë„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ ë¶€ë¶„ì€ ì´í›„ì— ë‹¤ë¤„ë³¼ ì˜ˆì •ì´ì§€ë§Œ ë¯¸ë¦¬ í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ê¸°ë³¸ ì„¸íŒ…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

## Neon DB ì„¸íŒ…

ê³µì‹ ë¬¸ì„œì—ì„œëŠ” `Neon` ì´ë¼ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì œê³µìë¥¼ ì¶”ì²œí•˜ê³  ìˆìŠµë‹ˆë‹¤.

https://neon.tech/

íšŒì›ê°€ì…ì„ ì™„ë£Œí•œë’¤ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤.
![](https://velog.velcdn.com/images/boyfromthewell/post/c4767c05-9554-437a-81f8-0552b576b7a8/image.png)

í”„ë¡œì íŠ¸ ì´ë¦„ë§Œ ì„¤ì •í•´ì£¼ê³  ëª¨ë“  ì„¤ì •ì€ ë””í´íŠ¸ê°’ìœ¼ë¡œ ë‘ì—ˆìŠµë‹ˆë‹¤.

## drizzle ORM ì„¸íŒ…

ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” DB ìŠ¤í‚¤ë§ˆ ì‘ì„±ì„ ìœ„í•´ `drizzle` ì´ë¼ëŠ” TypeScript ê¸°ë°˜ì˜ SQL ORMì„ ì„¸íŒ…í•˜ê² ìŠµë‹ˆë‹¤.

https://orm.drizzle.team/docs/get-started

![](https://velog.velcdn.com/images/boyfromthewell/post/d75d9e35-acaa-4b84-b2b6-0d4fb0d011f2/image.png)

Neon ë²„íŠ¼ì„ í´ë¦­í•œí›„ ì„¤ëª…ëŒ€ë¡œ ê·¸ëŒ€ë¡œ ì§„í–‰í•˜ë©´ ë©ë‹ˆë‹¤.

### 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
npm i drizzle-orm @neondatabase/serverless dotenv
npm i -D drizzle-kit tsx
```

### 2. í™˜ê²½ ë³€ìˆ˜ ë“±ë¡

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì— `.env` íŒŒì¼ì„ ìƒì„± í›„ í™˜ê²½ ë³€ìˆ˜ë¥¼ ë“±ë¡í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ìš°ì„  Neon ì½˜ì†”ì˜ ìƒì„±í•œ í”„ë¡œì íŠ¸ ëŒ€ì‰¬ë³´ë“œì—ì„œ ìƒë‹¨ì˜ Connect ë²„íŠ¼ì„ í´ë¦­ í›„ Connection String ê°’ì„ ë³µì‚¬í•´ì£¼ì–´ `env` íŒŒì¼ì— ë„£ì–´ì¤ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/b029c17c-7574-4bdf-9e6d-2266148c1ff3/image.png)

```
DATABASE_URL = 'postgresql://neondb_owner:npg_...'
```

### 3. Drizzle ORM ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°, í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì‘ì„±

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì— `db` í´ë”ë¥¼ ë§Œë“¤ê³  ì¸ë±ìŠ¤ íŒŒì¼ì„ ì‘ì„±í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```ts
// @/db/index.ts
import { drizzle } from "drizzle-orm/neon-http";
const db = drizzle(process.env.DATABASE_URL!);
export { db };
```

ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ì‹¤ì œë¡œ ìƒì„±í•˜ë„ë¡ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤.

ë™ì¼í•œ ê²½ë¡œì— `schema.ts` íŒŒì¼ì„ ì‘ì„±í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```ts
// @/db/schema.ts
import { integer, pgTable, text } from "drizzle-orm/pg-core";

export const postsTable = pgTable("posts", {
  id: integer().primaryKey().generatedAlwaysAsIdentity(),
  userName: text("user_name").notNull(),
  content: text().notNull(),
});
```

`posts` ì´ë¦„ì„ ê°€ì§€ëŠ” í…Œì´ë¸” ì…ë‹ˆë‹¤.
ë‹¤ì–‘í•œ ìŠ¤í‚¤ë§ˆ ì •ì˜ ë°©ì‹ì„ ì§€ì›í•˜ì§€ë§Œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

### 5. drizzle config íŒŒì¼ ì‘ì„±

ë§ˆì°¬ê°€ì§€ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ê²½ë¡œì— `drizzle.config.ts` íŒŒì¼ì„ ì‘ì„±í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```ts
// @/drizzle.config.ts
import "dotenv/config";
import { defineConfig } from "drizzle-kit";

export default defineConfig({
  out: "./drizzle",
  schema: "./db/schema.ts",
  dialect: "postgresql",
  dbCredentials: {
    url: process.env.DATABASE_URL!,
  },
});
```

ëª¨ë‘ ì„¤ì •ì´ ì˜ë˜ì—ˆë‹¤ë©´ í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì—ì„œ ì…ë ¥í•©ë‹ˆë‹¤.

```bash
npx drizzle-kit push
```

ë°ì´í„°ë² ì´ìŠ¤ì— ìŠ¤í‚¤ë§ˆ ë³€ê²½ì‚¬í•­ì„ ì ìš©í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/c0fa1361-e71f-472a-984b-513df6f2a0fd/image.png)

ë‹¤ì‹œ Neon ë°ì´í„°ë² ì´ìŠ¤ì— ë§Œë“¤ì–´ë‘” í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œë¡œ ë“¤ì–´ê°€ë³´ë©´ ì •ì˜í•œ `posts` í…Œì´ë¸”ì´ ì˜ ë“¤ì–´ ê°€ìˆëŠ” ëª¨ìŠµì…ë‹ˆë‹¤!

---

> í¬ìŠ¤íŒ…ì´ ë„ˆë¬´ ê¸¸ì–´ì ¸ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ TanStack Startê°€ ì œê³µí•˜ëŠ” `createServerFn` ê°™ì€ ì„œë²„í•¨ìˆ˜ë¥¼ ì§ì ‘ ì‚¬ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼, ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì „ì†¡í•˜ëŠ” ê³¼ì •ì„ í¬ìŠ¤íŒ… í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.
> ì‚¬ì‹¤ ì§€ê¸ˆê¹Œì§€ì˜ ê³¼ì •ì€ TanStack Routerê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë³´ê±°ë‚˜ ì„¸íŒ…í•˜ëŠ” ìì˜í•œ ê³¼ì •ì´ ì „ë¶€ì˜€ê¸°ì— ì¶”í›„ì— ë” ë‹¤ë¤„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
> ê°œì¸ì ìœ¼ë¡œ TanStack Routerë„ ì²˜ìŒ ì ‘í•´ë´¤ê¸°ì— ìƒˆë¡œìš´ ê±¸ ì•Œì•„ê°€ëŠ”ê±´ ì–¸ì œë‚˜ í¥ë¯¸ë¡œìš´ê²ƒ ê°™ìŠµë‹ˆë‹¤!
