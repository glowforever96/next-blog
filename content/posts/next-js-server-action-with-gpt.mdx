---
title: "[Next.js] ChatGPTê°€ ë¶„ì„í•´ì¤€ ë‚˜ì˜ ì „ìƒ ì•Œì•„ë³´ê¸° í† ì´ í”„ë¡œì íŠ¸ (feat. ì„œë²„ ì•¡ì…˜)"
date: "2025-02-27"
description: "ì„œë²„ ì•¡ì…˜ì„ ì‚¬ìš©í•´ë³´ì"
author: "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ê¶Œìˆœìš©"
parentCategory: "Frontend"
tags: ["React", "Next.js", "SSR", "Server Action"]
thumbnail: "/images/thumbnails/serveraction.webp"
---

> ë”±íˆ ë§Œë“¤ê²Œëœ ì´ìœ ëŠ” ì—†ìŠµë‹ˆë‹¤. Next.jsì˜ ì„œë²„ì•¡ì…˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ ë³´ê³  ì‹¶ê¸°ë„ í•˜ê³  ì¬ë¯¸ì‚¼ì•„ ì•„ì£¼ ê°„ë‹¨í•œ í† ì´í”„ë¡œì íŠ¸ë¥¼ ì œì‘ í•´ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤ğŸ˜‚
> Next 15 ë²„ì „ (app router) ê¸°ì¤€ìœ¼ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

## 1. OpenAI API í‚¤ ë°œê¸‰, OpenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

ìš°ì„  OpenAI í”Œë«í¼ì—ì„œ API í‚¤ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.
https://platform.openai.com/settings/organization/api-keys
ì•½ê°„ì˜ ê³¼ê¸ˆì´ ë°œìƒ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì €ë„ ì´ê²ƒì €ê²ƒ í•´ë³´ë‹¤ê°€ ì¶©ì „í•œ 5ë‹¬ëŸ¬ë¥¼ ì „ë¶€ ì¨ë²„ë ¸ìŠµë‹ˆë‹¤ã… ã…  (ë¬´ë£Œ í¬ë ˆë”§ì„ ì œê³µí–ˆìœ¼ë‚˜ ì´ì œ ë”ëŠ” ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•©ë‹ˆë‹¤...)

ë°œê¸‰ ë°›ëŠ” ê³¼ì •ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.

OpenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ì„ ìœ„í•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ì„¤ì¹˜ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```
npm i openai
```

## 2. envì— í™˜ê²½ ë³€ìˆ˜ ë“±ë¡

í”„ë¡œì íŠ¸ ìµœìƒë‹¨ ìœ„ì¹˜ì— env íŒŒì¼ì„ ìƒì„± í–ˆìŠµë‹ˆë‹¤.

```
// .env.local
OPEN_API_KEY = ë°œê¸‰ ë°›ì€ í‚¤
```

> ì„œë²„ ì•¡ì…˜ì„ í†µí•´ ì ‘ê·¼í•  ê²ƒì´ê¸° ë•Œë¬¸ì— NEXT_PUBLIC ì ‘ë‘ì‚¬ë¥¼ ë¶™ì´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì¶”ê°€ë¡œ API í‚¤ ê°™ì€ ë¯¼ê°í•œ í™˜ê²½ë³€ìˆ˜ëŠ” í•´ë‹¹ ì ‘ë‘ì‚¬ë¥¼ ë¶™ì´ì§€ ì•ŠëŠ”ê²ƒì´ ì¢‹ë‹¤ê³  í•©ë‹ˆë‹¤. (í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ìœ ì¶œ ë  ìœ„í—˜)

## 3. í™”ë©´ êµ¬í˜„ ë° ì„œë²„ ì•¡ì…˜ ì‹¤í–‰ í•¨ìˆ˜ ì‘ì„±

```tsx
// @/app/page.tsx
"use client";
import { createPastAction } from "@/action/createPastAction";
import LoadingSpinner from "@/components/loading-spinner";
import MyResult from "@/components/my-result";
import UserForm from "@/components/user-form";
import { useActionState } from "react";

export default function Home() {
  const [state, formAction, isPending] = useActionState(createPastAction, null);

  return (
    <div className="flex flex-col items-center justify-center">
      <div className="text-xl font-bold m-3 text-black">
        ChatGPTê°€ ë¶„ì„í•´ì¤€ ë‚˜ì˜ ì „ìƒ ì•Œì•„ë³´ê¸°âš¡ï¸
      </div>
      <UserForm
        formAction={formAction}
        isPending={isPending}
        error={state?.error}
      />
      {isPending && <LoadingSpinner />}
      {state?.desc && !isPending && (
        <MyResult desc={state.desc} url={state.url as string} />
      )}
    </div>
  );
}
```

í¬ê²Œ ìœ ì € Form ì˜ì—­, ë¡œë”© ìƒíƒœ ë³´ì—¬ì£¼ëŠ” ìŠ¤í”¼ë„ˆ ì»´í¬ë„ŒíŠ¸, ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„± ë˜ìˆìŠµë‹ˆë‹¤.

ë¦¬ì•¡íŠ¸ê°€ ì œê³µí•˜ëŠ” useActionStateë¼ëŠ” í›…ì„ í†µí•´ ì„œë²„ ì•¡ì…˜ ê²°ê³¼ë¬¼ ìƒíƒœë¥¼ ê´€ë¦¬í•  ì˜ˆì •ì…ë‹ˆë‹¤.

## âœ…useActionStateë€?

ë¦¬ì•¡íŠ¸ ì„œë²„ ì•¡ì…˜ì„ ì‚¬ìš©í•  ë•Œ ìƒíƒœ ê´€ë¦¬ì™€ í•¨ê»˜ ìš”ì²­ì„ ì‹¤í–‰í•˜ëŠ” í›…ì…ë‹ˆë‹¤.
Formê³¼ ê°™ì€ UIì—ì„œ ì„œë²„ ì•¡ì…˜ì„ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ìƒíƒœë¡œ ì €ì¥í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤.

### ì‚¬ìš©ë²•

```tsx
const [state, formAction, isPending] = useActionState(action, initialState);
```

- action: ë‚´ê°€ ì‘ì„±í•œ ì„œë²„ ì•¡ì…˜ ì‹¤í–‰ í•¨ìˆ˜
- initialState: stateì˜ ì´ˆê¸°ê°’, useState í›…ì˜ ì´ˆê¸°ê°’ ì§€ì •ê³¼ ë¹„ìŠ·í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

### ë‚˜ì˜ ì½”ë“œ

```tsx
const [state, formAction, isPending] = useActionState(createPastAction, null);
```

- state: ì„œë²„ ì•¡ì…˜ì˜ ê²°ê³¼ë¬¼ (ë”°ë¡œ ì‘ì„±í•´ë‘” createPastAction ì„œë²„ ì•¡ì…˜ í•¨ìˆ˜ì˜ ê²°ê³¼ë¬¼ì´ ë‹´ê¹ë‹ˆë‹¤.)
- formAction: í¼ì˜ action ì†ì„±ì— ë„£ì–´ì„œ ì„œë²„ ì•¡ì…˜ì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ = createPastAction
- isPending: ìš”ì²­ ì¤‘ì¸ì§€ ì—¬ë¶€ (boolean), ë¡œë”© ìƒíƒœ

## ì„œë²„ ì•¡ì…˜ í•¨ìˆ˜

```tsx
// /@/actions/createPastAction.ts
"use server";
import OpenAI from "openai";

const openai = new OpenAI({
  apiKey: process.env.OPEN_API_KEY,
  dangerouslyAllowBrowser: true,
});

const CMD_TEXT =
  "ë„ˆëŠ” ì „ìƒì„ ë´ì£¼ëŠ” ì—­í• ì´ì•¼. ìœ ì €ê°€ ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ í•œêµ­ì˜ ì—­ì‚¬ìƒì—ì„œ ì‹¤ì¡´í–ˆë˜ ì¸ë¬¼ ì¤‘ í•œ ëª…ê³¼ ì—°ê´€ì§€ì–´ ì „ìƒì„ ì•Œë ¤ì¤˜. ì‘ë‹µì— ë‚´ ìƒë…„ì›”ì¼ì„ ì–¸ê¸‰ì€ ì•ˆí•´ë„ ë˜. ì„±ë³„ì´ ì—¬ì„±ì¸ ê²½ìš°ëŠ” ë‚¨ìì¸ ì¸ë¬¼ì´ ë‚˜ì˜¤ë©´ ì•ˆë˜ë„ë¡ ê³ ë ¤í•´ì¤˜ì•¼í•´. ë‹¤ì–‘í•œ ì¸ë¬¼ì´ ë‚˜ì˜¤ë©´ ì¢‹ê² ì–´. ì´ëª¨ì§€ë„ ë„£ì–´ë„ ë˜";

// eslint-disable-next-line @typescript-eslint/no-explicit-any
export async function createPastAction(_: any, formData: FormData) {
  const gender = formData.get("gender")?.toString();
  const date = formData.get("date")?.toString();

  if (!date || date.trim() === "" || date.length < 8) {
    return { error: "ì •í™•í•œ ìƒë…„ì›”ì¼ì„ ì…ë ¥ í•´ì£¼ì„¸ìš”!" };
  }

  const response = await openai.chat.completions.create({
    model: "gpt-4o",
    temperature: 1,
    messages: [
      {
        role: "system",
        content: CMD_TEXT,
      },
      {
        role: "user",
        content: `ì €ëŠ” ì „ìƒì— ì–´ë–¤ í•œêµ­ì˜ ì—­ì‚¬ ì¸ë¬¼ì´ì—ˆì„ê¹Œìš”? ìƒë…„ì›”ì¼ì€ ${date}, ì„±ë³„ì€ ${gender}ì…ë‹ˆë‹¤.`,
      },
    ],
  });

  const characterDescription = response.choices[0].message.content;

  const imageResponse = await openai.images.generate({
    model: "dall-e-3",
    prompt: `í•œêµ­ì˜ ì—­ì‚¬ ì¸ë¬¼ê³¼ ê´€ë ¨ëœ ì´ë¯¸ì§€ ìƒì„±í•´ì¤˜. ${characterDescription}.`,
    n: 1,
    quality: "hd",
    size: "1024x1024",
  });

  return {
    desc: characterDescription,
    url: imageResponse.data[0].url,
  };
}
```

ì „ì²´ ì„œë²„ ì•¡ì…˜ í•¨ìˆ˜ ì½”ë“œ ì…ë‹ˆë‹¤.

```tsx
"use server";
import OpenAI from "openai";

const openai = new OpenAI({
  apiKey: process.env.OPEN_API_KEY, // ì„œë²„ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
  dangerouslyAllowBrowser: true, // ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš© ìœ„í•¨ (ì„œë²„ ì•¡ì…˜ "use server" ë‚´ë¶€ì—ì„œ APIë¥¼ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì— ì•ˆì „)
});

const CMD_TEXT =
  "ë„ˆëŠ” ì „ìƒì„ ë´ì£¼ëŠ” ì—­í• ì´ì•¼. ìœ ì €ê°€ ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ í•œêµ­ì˜ ì—­ì‚¬ìƒì—ì„œ ì‹¤ì¡´í–ˆë˜ ì¸ë¬¼ ì¤‘ í•œ ëª…ê³¼ ì—°ê´€ì§€ì–´ ì „ìƒì„ ì•Œë ¤ì¤˜. ì‘ë‹µì— ë‚´ ìƒë…„ì›”ì¼ì„ ì–¸ê¸‰ì€ ì•ˆí•´ë„ ë˜. ì„±ë³„ì´ ì—¬ì„±ì¸ ê²½ìš°ëŠ” ë‚¨ìì¸ ì¸ë¬¼ì´ ë‚˜ì˜¤ë©´ ì•ˆë˜ë„ë¡ ê³ ë ¤í•´ì¤˜ì•¼í•´. ë‹¤ì–‘í•œ ì¸ë¬¼ì´ ë‚˜ì˜¤ë©´ ì¢‹ê² ì–´. ì´ëª¨ì§€ë„ ë„£ì–´ë„ ë˜";
```

ìš°ì„  ì„œë²„ ì•¡ì…˜ ì‚¬ìš©ì„ ìœ„í•´ "use server" ì„ ì–¸ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ì¼ë°˜ì ì¸ í´ë¼ì´ì–¸íŠ¸ https ìš”ì²­ (fetch) ì‚¬ìš© ëŒ€ì‹  OpenAIì˜ ê³µì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ API ìš”ì²­ì„ í•  ê²ƒì…ë‹ˆë‹¤!!

CMD_TEXTëŠ” ChatGPTì—ê²Œ ì—­í• ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ìµœëŒ€í•œ êµ¬ì²´ì ìœ¼ë¡œ ì ì–´ì•¼ ë§Œì¡±í• ë§Œí•œ ë‹µë³€ì´ ë‚ ì•„ì™”ìŠµë‹ˆë‹¤.

```tsx
export async function createPastAction(_: any, formData: FormData) {
  const gender = formData.get("gender")?.toString();
  const date = formData.get("date")?.toString();
```

ì„œë²„ ì•¡ì…˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì „ë‹¬í•œ ì„±ë³„, ìƒë…„ì›”ì¼ ë°ì´í„°ë¥¼ ì¶”ì¶œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¶”ê°€ë¡œ í•¨ìˆ˜ì— ì „ë‹¬ëœ ì²«ë²ˆì§¸ ì¸ìëŠ” ì›ë˜ useActionStateê°€ ë‚´ë¶€ì ìœ¼ë¡œ ë„˜ê²¨ì£¼ëŠ” ê°’ (ì§ì „ state ê°’)ì´ ì „ë‹¬ ë©ë‹ˆë‹¤. ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì–´ \_ ì²˜ë¦¬ë¥¼ í•´ë‘ì—ˆìŠµë‹ˆë‹¤.

## ìœ ì € Form ì»´í¬ë„ŒíŠ¸

```tsx
// /@/components/user-form.tsx
interface UserFormProps {
  formAction: (formData: FormData) => void;
  isPending: boolean;
  error: string | undefined;
}

export default function UserForm({
  formAction,
  isPending,
  error,
}: UserFormProps) {
  return (
    <form
      action={formAction}
      className="w-[100%] h-auto flex flex-col p-4 gap-8 justify-self-center shadow-lg rounded-lg"
    >
      <div className="text-xl">
        <label htmlFor="gender" className="text-gray-600 font-semibold">
          ì„±ë³„
        </label>
        <div className="flex gap-2 items-center mt-2">
          {["ë‚¨ì„±", "ì—¬ì„±"].map((text) => (
            <label key={text} className="flex items-center gap-1 text-gray-700">
              <input
                type="radio"
                name="gender"
                value={text}
                defaultChecked={text === "ë‚¨ì„±"}
                className="size-4"
              />
              {text}
            </label>
          ))}
        </div>
      </div>
      <div className="flex flex-col text-xl">
        <label htmlFor="date" className="text-gray-600 font-semibold">
          ìƒë…„ì›”ì¼
        </label>
        <input
          placeholder="YYYY/MM/DD"
          name="date"
          className="border border-gray-300 rounded-md px-4 py-2 mt-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
        />
      </div>
      // ì—ëŸ¬ ì²˜ë¦¬
      {error && (
        <span className="text-red-500 font-semibold text-sm">{error}</span>
      )}
      <button
        disabled={isPending}
        type="submit"
        className="w-full py-2 text-lg font-semibold text-white bg-blue-500 rounded-md hover:bg-blue-600 active:bg-blue-700 transition-colors"
      >
        {isPending ? "ë¶„ì„ ì¤‘..." : "ë¶„ì„í•˜ê¸°"}
      </button>
    </form>
  );
}
```

propsë¡œ ë„˜ê²¨ ë°›ì€ formAction í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ form ë‚´ë¶€ì˜ name="gender", name="date" ì†ì„±ì„ ê°€ì§„ ì…ë ¥ê°’ë“¤ì´ FormData ê°ì²´ë¥¼ í†µí•´ ì„œë²„ í•¨ìˆ˜ë¡œ ì „ë‹¬ëœë‹¤ê³  í•©ë‹ˆë‹¤.

### ì—ëŸ¬ ì²˜ë¦¬

```tsx
if (!date || date.trim() === "" || date.length !== 8) {
  return { error: "ì •í™•í•œ ìƒë…„ì›”ì¼ì„ ì…ë ¥ í•´ì£¼ì„¸ìš”!" };
}
```

ê°„ë‹¨í•œ ì—ëŸ¬ì²˜ë¦¬ë„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ì„ ì…ë ¥ì‹œ í•´ë‹¹ ê°ì²´ë¥¼ ë¦¬í„´í•´ state ê°’ì— ë‹´ê¹ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/boyfromthewell/post/7f0afcda-20ed-4f18-a032-96cbad9e6f3e/image.png)

### ì „ìƒ ì •ë³´ ìš”ì²­, ì´ë¯¸ì§€ ìƒì„±

ì…ë ¥ ê°’ì´ ìœ íš¨í•˜ë‹¤ë©´ OpenAI APIë¡œ ì „ìƒ ì •ë³´ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µì„ ë°›ì•„ì˜µë‹ˆë‹¤.

```tsx
const response = await openai.chat.completions.create({
  model: "gpt-4o",
  temperature: 1,
  messages: [
    {
      role: "system",
      content: CMD_TEXT,
    },
    {
      role: "user",
      content: `ì €ëŠ” ì „ìƒì— ì–´ë–¤ í•œêµ­ì˜ ì—­ì‚¬ ì¸ë¬¼ì´ì—ˆì„ê¹Œìš”? ìƒë…„ì›”ì¼ì€ ${date}, ì„±ë³„ì€ ${gender}ì…ë‹ˆë‹¤.`,
    },
  ],
});

const characterDescription = response.choices[0].message.content;
```

ChatGPTì™€ ë‹¨ìˆœ ëŒ€í™”í•˜ê¸° ìœ„í•œ APIë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.

messages í”„ë¡œí¼í‹°ì—ì„œ roleì´ systemì¸ ê°ì²´ì˜ content ê°’ì€ ì…ë ¥í•œ ê°’ì— ë”°ë¼ ChatGPTì— ë¯¸ë¦¬ ì—­í• ì„ ë¶€ì—¬í•˜ëŠ”ê²ƒì´ë¼ê³  í•©ë‹ˆë‹¤. ë¯¸ë¦¬ ì ì–´ë‘” í…ìŠ¤íŠ¸ë¥¼ ë„£ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.

ê·¸ ë‹¤ìŒ roleì´ userì¸ ê°ì²´ëŠ” ì‹¤ì œ ìœ ì €ê°€ ì§ˆë¬¸í•  ë‚´ìš©ì„ ë‹´ì•„ ìš”ì²­í•´ì£¼ëŠ” ê°ì²´ì…ë‹ˆë‹¤.

> **ë” ìì„¸í•œ ì‚¬ìš©ë²•** > https://platform.openai.com/docs/api-reference/chat/create

ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©´ `choices[0].message.content`ì— ì ‘ê·¼í•´ ì‘ë‹µ ë‚´ìš© í…ìŠ¤íŠ¸ë¥¼ ì–»ì„ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì œ ì´ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì‹œ ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ì„ í†µí•´ ì´ë¯¸ì§€ë¥¼ ìš”ì²­í–ˆìŠµë‹ˆë‹¤.

```tsx
const imageResponse = await openai.images.generate({
  model: "dall-e-3",
  prompt: `í•œêµ­ì˜ ì—­ì‚¬ ì¸ë¬¼ê³¼ ê´€ë ¨ëœ ì´ë¯¸ì§€ ìƒì„±í•´ì¤˜. ${characterDescription}.`,
  n: 1,
  quality: "hd",
  size: "1024x1024",
});

return {
  desc: characterDescription,
  url: imageResponse.data[0].url,
};
```

> **ë” ìì„¸í•œ ì‚¬ìš©ë²•** > https://platform.openai.com/docs/api-reference/images

ì²˜ìŒì—ëŠ” ëª¨ë¸ì„ ë””í´íŠ¸ ê°’ì¸ dall-e-2ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° ë§Œì¡±í• ë§Œí•œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ ì£¼ì§€ì•Šì•„ dall-e-3ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

ìš”ì²­ì´ ì˜ ìˆ˜í–‰ë˜ë©´ data[0].urlì— ì ‘ê·¼í•´ ì´ë¯¸ì§€ urlì„ ì–»ì„ ìˆ˜ ìˆê³  ìµœì¢…ì ìœ¼ë¡œ ì„œë²„ ì•¡ì…˜í•¨ìˆ˜ì—ì„œ ì„¤ëª… í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ urlì„ ë¦¬í„´ í•©ë‹ˆë‹¤.

## ë°ì´í„° ë¿Œë ¤ì£¼ê¸°

ë‹¤ì‹œ ë©”ì¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¡œ ëŒì•„ì™”ìŠµë‹ˆë‹¤!!

```tsx
"use client";
import { createPastAction } from "@/action/createPastAction";
import LoadingSpinner from "@/components/loading-spinner";
import MyResult from "@/components/my-result";
import UserForm from "@/components/user-form";
import { useActionState } from "react";

export default function Home() {
  const [state, formAction, isPending] = useActionState(createPastAction, null);

  return (
    <div className="flex flex-col items-center justify-center">
      <div className="text-xl font-bold m-3 text-black">
        ChatGPTê°€ ë¶„ì„í•´ì¤€ ë‚˜ì˜ ì „ìƒ ì•Œì•„ë³´ê¸°âš¡ï¸
      </div>
      <UserForm
        formAction={formAction}
        isPending={isPending}
        error={state?.error}
      />
      {isPending && <LoadingSpinner />}
      {state?.desc && !isPending && (
        <MyResult desc={state.desc} url={state.url as string} />
      )}
    </div>
  );
}
```

ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ëœë’¤ ì„œë²„ì•¡ì…˜ í•¨ìˆ˜ì—ì„œ ë¦¬í„´í•œ ê°ì²´ê°€ stateì— ë‹´ê¸°ê²Œ ë©ë‹ˆë‹¤.
![](https://velog.velcdn.com/images/boyfromthewell/post/bdcad440-0093-461f-b3c2-1f225976375b/image.png)

ì´ì œ MyResult ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```tsx
// @/components/my-result.tsx
import Image from "next/image";

export default function MyResult({ desc, url }: { desc: string; url: string }) {
  return (
    <div className="mt-2 p-4 bg-white shadow-md rounded-lg">
      <p className="text-gray-700 text-xl font-medium">{desc}</p>
      <div className="mt-4 flex justify-center">
        <Image
          src={url}
          alt="ê²°ê³¼ ì´ë¯¸ì§€"
          width={400}
          height={400}
          className="rounded-md"
        />
      </div>
    </div>
  );
}
```

![](https://velog.velcdn.com/images/boyfromthewell/post/3d1d6d2f-7c15-40c3-8916-7027508e376e/image.png)

> _OpenAI APIì™€ ë¦¬ì•¡íŠ¸ì˜ ì„œë²„ì•¡ì…˜ì„ í™œìš©í•´ ê°„ë‹¨í•˜ê³  ì¬ë°ŒëŠ” í† ì´í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> ì„œë²„ì•¡ì…˜ì„ í†µí•´ ë³„ë„ì˜ ìƒíƒœ ê´€ë¦¬ (useState, useEffect ë“±,,,,)ê°€ í•„ìš”ì—†ì–´ ì½”ë“œê°€ ê°„ê²°í•´ì¡Œë‹¤ëŠ” ì ì´ ë§ˆìŒì— ë“¤ì—ˆìŠµë‹ˆë‹¤. ë³„ë„ì˜ API ì—”ë“œí¬ì¸íŠ¸ê°€ í•„ìš” ì—†ì´ í¼ ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ ë°”ë¡œ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ë„ ì¬ë¯¸ìˆì—ˆìŠµë‹ˆë‹¤.
> ë¡œë”© ìƒíƒœ ë˜í•œ useActionStateì—ì„œ ë°”ë¡œ ì œê³µí•´ì£¼ê¸°ì— ë¡œë”© UIë¥¼ ì‰½ê²Œ ì—°ê²° ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ë„ ì¥ì ì´ ìˆëŠ”ê²ƒ ê°™ìŠµë‹ˆë‹¤.
> ì˜ëª» ì „ë‹¬í•œ ë‚´ìš©ì´ ìˆë‹¤ë©´ ì§€ì  ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.ğŸ«¡_
